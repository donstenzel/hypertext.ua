# Experimental!
~ "fns" ~ LoadPage Uiua

GetExt â† âœâ‡Œ(â–½Â¬\â†¥âŠ¸âŒ•@.)

SpecialMimes â† Â°âŠŸâ‰[
  {"js" "text/javascript"}
  {"wasm" "application/wasm"}
]

ExtMime â† (
  â–¡GetExt
  SpecialMimes
  ğ„ˆâ–½âŠ™âŠ¸ğ„ˆâŒ•:
  â£(âŠ“(Â°â–¡âŠ¢|â—Œ)|â—‡âŠ‚"text/"â—Œ)
)

Response â† (
  âŠ™âŠ™âŠ¸â§»
  $$ HTTP/1.1 _
  $$ Content-Type: _
  $$ Content-Length: _
  $$ 
  $$ 
  âŠ‚ utfâ‚ˆ
)

HandleRequest â† â£(
  Response "200 OK" "text/html" utfâ‚ˆ LoadPage "index.ua" Â°"/"
| Response "200 OK" "text/plain" utfâ‚ˆ "Server is stopping." Â°"/stop"
| Response "200 OK" "text/html" utfâ‚ˆ LoadPage âŒâŠ‚@/ âœÂ°$"/p/_.ua"
| Response "200 OK" "text/plain" utfâ‚ˆ Uiua âŒâŠ‚@/ âœÂ°$"/_.ua"
| Response "404 Not Found" "text/plain" utfâ‚ˆ "Not Found!" â—Œ
)

Respond â† recv pool(
  &p$"Request by _" âŠ¸&tcpaddr
  Â°â–¡âŠ¡â‚ âŠœâ–¡âŠ¸â‰ @\s âŠ¸&ru "\r\n\r\n"
  &pâŠ¸$"Path is _"
  HandleRequest
  send0âŠ¸(Â¬/â†¥âŒ•"Server is stopping."Â°utfâ‚ˆ)
  &p$"Response is _ bytes."âŠ¸â§»
  âŠƒâ‹…&cl&w
)

Server â† &tcpl "0.0.0.0:8000"

# print error and continue
# 1 ? error
E â† 1 &p$"Failed to respond!\n_"

Run â† â¢(|â£Respondâ‹…E&tcpa Server)

Run
